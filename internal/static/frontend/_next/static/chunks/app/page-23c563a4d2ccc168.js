(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9951:(e,n,r)=>{Promise.resolve().then(r.bind(r,3906))},3906:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>o});var s=r(5155),t=r(2115);function a(e){let{url:n,onMessage:r,onError:a,onConnectionChange:l,retryInterval:o=5e3,children:c}=e,[d,i]=(0,t.useState)(!1),g=(0,t.useRef)(null),u=(0,t.useRef)(null),m=(0,t.useCallback)(()=>{null!==u.current&&(window.clearTimeout(u.current),u.current=null),g.current&&(g.current.close(),g.current=null)},[]),x=(0,t.useCallback)(()=>{try{m(),console.log("Attempting to connect to SSE endpoint:",n);let e=new EventSource(n,{withCredentials:!1});return g.current=e,e.onopen=()=>{console.log("SSE connection established"),i(!0),null==l||l(!0)},e.onmessage=e=>{console.log("Raw SSE message received:",e.data);try{let n=JSON.parse(e.data);console.log("Parsed SSE message:",n),null==r||r(n)}catch(n){console.error("Failed to parse SSE message:",n),console.error("Raw message that failed:",e.data),null==a||a(Error("Failed to parse SSE message"))}},e.onerror=e=>{console.error("SSE connection error:",e),i(!1),null==l||l(!1),m(),console.log("Will attempt to reconnect in ".concat(o,"ms")),u.current=window.setTimeout(()=>{console.log("Attempting to reconnect..."),x()},o)},e}catch(e){return console.error("Failed to establish SSE connection:",e),null==a||a(Error("Failed to establish SSE connection")),null}},[n,r,a,l,o,m]);return((0,t.useEffect)(()=>(x(),()=>{console.log("Cleaning up SSE connection"),m()}),[x,m]),c)?(0,s.jsx)(s.Fragment,{children:c(d)}):null}let l={baseUrl:"http://localhost:8080",endpoints:{events:"/events"}};function o(){let[e,n]=(0,t.useState)([]);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Event Stream Monitor"})})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"px-4 py-6 sm:px-0",children:(0,s.jsx)("div",{className:"border-4 border-dashed border-gray-200 dark:border-gray-700 rounded-lg p-4",children:(0,s.jsx)(a,{url:"".concat(l.baseUrl).concat(l.endpoints.events),onMessage:e=>{console.log("Received event:",e),n(n=>[...n,e])},onError:e=>{console.error("Stream error:",e)},onConnectionChange:e=>{console.log("Connection state changed:",e)},children:n=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(n?"bg-green-500 animate-pulse":"bg-red-500")}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n?"Connected":"Disconnected"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-4",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Event Log"}),(0,s.jsx)("div",{className:"h-64 overflow-y-auto font-mono text-sm bg-gray-50 dark:bg-gray-900 p-4 rounded",children:0===e.length?(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Waiting for events..."}):(0,s.jsx)("div",{className:"space-y-2",children:e.map((e,n)=>(0,s.jsxs)("div",{className:"text-gray-700 dark:text-gray-300",children:[(0,s.jsx)("span",{className:"text-blue-500",children:e.type}),":"," ",JSON.stringify(e.payload)]},n))})})]})]})})})})})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[441,517,358],()=>n(9951)),_N_E=e.O()}]);